## 问题分析

### 根本原因

**CesiumMap.vue 组件在卸载时没有销毁 Cesium Viewer**

**问题流程**：
1. 首次访问 `/tsa` → CesiumMap 挂载 → 初始化 Cesium Viewer → 保存到 `app.config.globalProperties.$cesiumViewer`
2. 切换到 `/members` → CesiumMap 卸载 → **但没有销毁 Cesium Viewer** → DOM 容器 `#cesium-container` 被移除
3. 再次切换到 `/tsa` → CesiumMap 重新挂载 → `ensureCesiumViewer` 检查 `existingViewer.isDestroyed()` 返回 false → 直接返回，不重新初始化
4. **但是 DOM 容器已经不存在了** → 地图无法渲染

### 关键代码问题

```javascript
// 第 762-766 行
if (existingViewer && !existingViewer.isDestroyed()) {
  console.log('Cesium Viewer exists on route change')
  cesiumViewer.value = existingViewer
  return  // 直接返回，不重新初始化
}

// 第 1073-1081 行 - onUnmounted 中没有销毁 Viewer
onUnmounted(() => {
  console.log('CesiumMap unmounted')
  // 只销毁了鼠标事件和航线实体，没有销毁 Cesium Viewer
})
```

## 解决方案

在 `onUnmounted` 中销毁 Cesium Viewer 并清除全局引用：

```javascript
onUnmounted(() => {
  console.log('CesiumMap unmounted')
  // 销毁鼠标事件
  useCesiumMouseToolHook.mouseTool('off', () => {})
  // 销毁航线编辑点击处理
  removeWaylineClickHandler()
  // 清除航线实体
  clearWaylineEntities()
  
  // 新增：销毁 Cesium Viewer
  const app = getApp()
  if (app?.config.globalProperties.$cesiumViewer) {
    app.config.globalProperties.$cesiumViewer.destroy()
    app.config.globalProperties.$cesiumViewer = null
  }
  if (cesiumViewer.value) {
    cesiumViewer.value = null
  }
})
```