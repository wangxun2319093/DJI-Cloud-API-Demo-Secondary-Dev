## 问题总结

1. **模拟器架构不匹配**：当前模拟 Dock+Drone，但数据库配置的是 Gateway(RC)+Drone
2. **main.py 未创建 GatewayModel**：导致 Gateway status 未发送
3. **OSD 格式不匹配**：发送 Dock OSD 但需要 RC Drone OSD

## 解决方案

### 1. 修改 main.py
- 创建 `GatewayModel` 并传入 `DeviceSimulator`
- 确保 Gateway status 正确发送

### 2. 修改 device_simulator.py
- 确保 Gateway 上线时发送正确的 status 消息
- Gateway OSD 使用 `OsdRemoteControl` 格式
- Drone OSD 使用 `OsdRcDrone` 格式

### 3. 修改 models/gateway.py
- 确保 Gateway OSD 格式符合大疆上云API要求

### 4. 添加飞行任务模拟
- 在 `flight_simulator.py` 中添加自动航线任务
- 根据航线变化经纬度和高度

### 5. 测试验证
- 运行模拟器
- 验证 Redis 缓存
- 验证前端展示