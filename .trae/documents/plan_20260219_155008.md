# 航线距离计算问题分析与修复计划

## 问题分析

### 当前代码流程
```
航点高度变化 → watch 触发 → 重新生成 scanPath → interpolateHeight 计算插值高度 → missionStats 计算距离
```

### 问题定位
`missionStats` 是 `computed` 属性，依赖 `scanPath.value`。当 `scanPath` 更新时，`missionStats` 应该自动重新计算。

**但是**，需要验证：
1. `scanPath` 更新后，其中的点是否包含正确的插值高度？
2. `missionStats` 是否正确读取了每个点的 `height` 属性？

### 可能的问题
1. **`scanPath` 更新但 `computed` 未触发** - Vue 响应式问题
2. **插值高度未正确计算** - `interpolateHeight` 函数问题
3. **高度属性名不匹配** - `height` vs `altitude`

---

## 修复方案

### 1. 添加调试日志
在 `missionStats` 中添加日志，确认：
- `scanPath` 是否更新
- 每个点的 `height` 值是否正确

### 2. 检查 `computed` 依赖
确保 `missionStats` 正确依赖 `scanPath.value`

### 3. 验证插值结果
在 `generatePolygonRoute` 中添加日志，确认插值高度是否正确

---

## 需要修改的文件
- `front/src/pages/page-web/projects/workspace.vue` - 添加调试日志

## 预计修改行数: 约 10 行