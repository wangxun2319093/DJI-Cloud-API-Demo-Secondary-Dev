## 问题分析

### 问题1：面状航线对条线不显示

**根本原因**：`renderBoundary` 函数中多边形的高度设置不正确

```javascript
// CesiumMap.vue 第 995-1007 行
const positions = points.map(p =>
  Cesium.Cartesian3.fromDegrees(p.lng, p.lat, (p.height || 50) + 1)  // 顶点高度 51
)
const polygon = cesiumViewer.value!.entities.add({
  polygon: {
    hierarchy: new Cesium.PolygonHierarchy(positions),
    material: Cesium.Color.fromCssColorString('#3498db').withAlpha(0.3),
    height: 0,  // ❌ 多边形面高度为 0，与顶点高度不一致
    ...
  }
})
```

**问题**：

* 多边形顶点高度：51 米

* 多边形面高度：0 米（地面）

* 扫描路径高度：50 米

这导致多边形面在地面，而扫描路径在 50 米高度，视觉上看起来扫描路径"悬浮"在多边形上方，可能被遮挡或不明显。

### 问题2：缺少对 routeType 变化的监听

当 `routeType` 从 `waypoint` 切换到 `mapping` 时，`CesiumMap.vue` 没有监听这个变化来重新渲染边界和扫描路径。

## 解决方案

### 修改 CesiumMap.vue

1. **修复多边形高度**：将 `height: 0` 改为与顶点高度一致

```javascript
const polygon = cesiumViewer.value!.entities.add({
  polygon: {
    hierarchy: new Cesium.PolygonHierarchy(positions),
    material: Cesium.Color.fromCssColorString('#3498db').withAlpha(0.3),
    outline: true,
    outlineColor: Cesium.Color.fromCssColorString('#3498db'),
    outlineWidth: 2,
    height: points[0].height || 50,  // ✅ 使用航点高度
    heightReference: Cesium.HeightReference.NONE
  }
})
```

1. **添加 routeType 变化监听**：

```javascript
// 监听航线类型变化
watch(() => props.routeType, () => {
  renderBoundary()
  renderScanPath()
})
```

1. **在 waypoints 变化时也渲染扫描路径**：

```javascript
watch(() => props.waypoints, () => {
  renderWaypoints()
  renderBoundary()
  renderScanPath()  // ✅ 添加这行
}, { deep: true })
```

