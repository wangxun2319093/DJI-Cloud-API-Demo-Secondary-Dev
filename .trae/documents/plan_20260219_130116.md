# DSM 地图管理接口测试计划

## 测试环境
- 后端地址: `http://10.39.29.101:6789`
- API 前缀: `/map/api/v1`
- 工作区 ID: `e3dea0f5-37f2-4d79-ae58-490af3228069`

---

## 测试步骤

### 1. 准备测试文件
创建测试用的 ZIP 文件（包含 tileset.json）

### 2. 获取认证 Token
从前端 localStorage 获取有效的 `x-auth-token`

### 3. 测试接口

#### 3.1 上传地图 (POST)
```bash
curl -X POST "http://10.39.29.101:6789/map/api/v1/workspaces/{workspace_id}/maps/upload" \
  -H "x-auth-token: {token}" \
  -F "file=@test-terrain.zip" \
  -F "map_name=Test Map" \
  -F "map_format=3dtiles"
```

#### 3.2 获取地图列表 (GET)
```bash
curl -X GET "http://10.39.29.101:6789/map/api/v1/workspaces/{workspace_id}/maps" \
  -H "x-auth-token: {token}"
```

#### 3.3 获取地图详情 (GET)
```bash
curl -X GET "http://10.39.29.101:6789/map/api/v1/workspaces/{workspace_id}/maps/{map_id}" \
  -H "x-auth-token: {token}"
```

#### 3.4 删除地图 (DELETE)
```bash
curl -X DELETE "http://10.39.29.101:6789/map/api/v1/workspaces/{workspace_id}/maps/{map_id}" \
  -H "x-auth-token: {token}"
```

### 4. 验证结果
- 检查数据库 `manage_map` 表
- 检查 MinIO `aircraft-bucket/map/` 目录
- 检查后端日志

---

## 预计操作
1. 创建测试文件
2. 获取 token
3. 执行 4 个接口测试
4. 验证数据库和 MinIO