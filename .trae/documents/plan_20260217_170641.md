## 模拟器改写计划：支持两组设备（机场+无人机 和 遥控器+无人机）

### 背景

根据大疆上云API文档和前端代码分析：

* **Dock 面板**：显示 `domain=3` (机场) 设备

* **Online Devices 面板**：显示 `domain=2` (遥控器) 且 `status=true` 的设备

### 设备类型对照表

| 设备  | domain | type           | 说明      |
| --- | ------ | -------------- | ------- |
| 无人机 | 0      | 89 (M350)      | 子设备     |
| 遥控器 | 2      | 119 (RC\_PLUS) | Gateway |
| 机场  | 3      | 1 (DOCK)       | Dock    |

### 修改计划

#### 1. 修改配置文件 `config/config.yaml`

添加 Gateway 配置：

```yaml
devices:
  dock:
    sn: 'DOCKSIM001'
    name: 'DJI Dock'
    type: 1
    domain: 3
  gateway:
    sn: 'GATEWAYSIM001'
    name: 'DJI RC Plus'
    type: 119
    domain: 2
  drone:
    sn: 'DRONESIM001'
    name: 'DJI M30T'
    type: 89
    domain: 0
```

#### 2. 修改 `main.py`

* 添加 `create_gateway_model()` 函数

* 创建 GatewayModel 并传入 DeviceSimulator

* 更新日志输出

#### 3. 修改 `models/gateway.py`

* 修复 WirelessLink 字段命名为下划线格式（前端期望）

* 确保与后端 OsdGateway 格式一致

#### 4. 修改 `simulator/device_simulator.py`

* 确保 Gateway status 和 OSD 正确发送

* Gateway OSD 使用下划线命名（前端期望）

#### 5. 数据库配置

* 添加 GATEWAYSIM001 设备记录

* 绑定 DRONESIM001 为子设备

### 预期结果

* **Dock 面板**：显示 DOCKSIM001 + DRONESIM001

* **Online Devices 面板**：显示 GATEWAYSIM001 + DRONESIM001

